<mat-card>
  <mat-card-header>
    <mat-card-title>{{ formGroup.controls.id.value ? 'Edit' : 'New' }} Diet</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="formGroup" class="mt-3">
      <div class="container-fluid">
        <div class="row">
          <div class="col-6">
            <mat-form-field class="w-100">
              <mat-label>Name</mat-label>
              <input matInput formControlName="name">
            </mat-form-field>
          </div>

          <div class="col-6">
            <mat-form-field class="w-100">
              <mat-label>Search for a meal</mat-label>
              <input [formControl]="mealSearchFormControl" [matAutocomplete]="auto" matInput>
              <mat-autocomplete
                (optionSelected)="onOptionSelected($event)"
                [displayWith]="optionToNameMapper"
                [hideSingleSelectionIndicator]="true"
                #auto="matAutocomplete"
              >
                @for (mealOption of mealAutocompleteOptions$ | async; track mealOption.id) {
                  <mat-option [value]="mealOption">{{mealOption.name}}</mat-option>
                }
              </mat-autocomplete>
            </mat-form-field>
          </div>

          <div class="col-6">
            <mat-form-field class="w-100">
              <mat-label>Description</mat-label>
              <textarea formControlName="description" cdkAutosizeMinRows="6" cdkTextareaAutosize matInput></textarea>
            </mat-form-field>
          </div>

          <div class="col-6">
            <app-meal-table [dataSource]="mealTableDataSource$ | async"></app-meal-table>
          </div>
        </div>
      </div>
    </form>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button (click)="onCreateClick()">Create</button>
    <button mat-button (click)="onResetClick()">Reset</button>
  </mat-card-actions>
</mat-card>
