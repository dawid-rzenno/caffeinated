<mat-card>
  <mat-card-header>
    <mat-card-title>{{ formGroup.controls.id.value ? 'Edit' : 'New' }} Diet</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="formGroup">
      <div class="form-fields">
        <mat-form-field class="form-field">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name">
        </mat-form-field>

        <mat-form-field class="form-field">
          <mat-label>Description</mat-label>
          <input matInput formControlName="description">
        </mat-form-field>

        <div class="form-fields">
          <h6>Meals</h6>

          <mat-form-field class="form-field">
            <mat-label>Search for a meal</mat-label>
            <input [formControl]="mealSearchFormControl" [matAutocomplete]="auto" matInput>
            <mat-autocomplete
              (optionSelected)="onOptionSelected($event)"
              [displayWith]="optionToNameMapper"
              #auto="matAutocomplete"
            >
              @for (mealOption of mealAutocompleteOptions$ | async; track mealOption.id) {
                <mat-option [value]="mealOption">{{mealOption.name}}</mat-option>
              }
            </mat-autocomplete>
          </mat-form-field>

          <app-meal-table [dataSource]="mealTableDataSource$ | async"></app-meal-table>
        </div>
      </div>
    </form>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button (click)="onCreateClick()">Create</button>
    <button mat-button (click)="onResetClick()">Reset</button>
  </mat-card-actions>
</mat-card>
