<mat-card>
  <mat-card-header>
    <mat-card-title>{{ formGroup.controls.id.value ? 'Edit' : 'New' }} Shopping List</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="formGroup">
      <div class="form-fields">
        <mat-form-field class="form-field">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name">
        </mat-form-field>

        <mat-form-field class="form-field">
          <mat-label>Description</mat-label>
          <input matInput formControlName="description">
        </mat-form-field>

        <div class="form-fields">
          <h6>Ingredients</h6>

          <mat-form-field class="form-field">
            <mat-label>Search for an ingredient</mat-label>
            <input [formControl]="ingredientSearchFormControl" [matAutocomplete]="auto" matInput>
            <mat-autocomplete
              (optionSelected)="onOptionSelected($event)"
              [displayWith]="optionToNameMapper"
              #auto="matAutocomplete"
            >
              @for (ingredientOption of ingredientAutocompleteOptions$ | async; track ingredientOption.id) {
                <mat-option [value]="ingredientOption">{{ingredientOption.name}}</mat-option>
              }
            </mat-autocomplete>
          </mat-form-field>

          <ul>
            @for (ingredient of ingredientsFormArray.value; track ingredient.id) {
              <li>{{ingredient.id}} | {{ingredient.name}}</li>
            }
          </ul>
        </div>
      </div>
    </form>
  </mat-card-content>
  <mat-card-actions>
    <button mat-button (click)="onCreateClick()">Create</button>
    <button mat-button (click)="onResetClick()">Reset</button>
  </mat-card-actions>
</mat-card>
